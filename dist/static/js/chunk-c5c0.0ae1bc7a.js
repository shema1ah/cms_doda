(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-c5c0"],{"2QOn":function(t,e,a){},"9Pcu":function(t,e,a){"use strict";var i={props:{thead:{type:Array,required:!0},list:{type:Array,required:!0,default:function(){return[]}},actions:{type:Array,default:function(){return[]}},listLoading:{type:Boolean,default:!1}},computed:{},created:function(){},methods:{}},n=(a("SG8p"),a("KHd+")),l=Object(n.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{"border-radius":"6px","margin-top":"15px"},attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[t._l(t.thead,function(e){return a("el-table-column",{key:e.label,attrs:{sortable:e.sort,label:e.label,width:e.width,prop:e.value,align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e.isImage?["Array"==={}.toString.call(i.row[e.value]).slice(8,-1)?a("el-carousel",{attrs:{height:e.styleObject.height,autoplay:!1,"indicator-position":"none",type:"card"}},t._l(i.row[e.value],function(t,i){return a("el-carousel-item",{key:i},[a("img",{style:e.styleObject,attrs:{src:t,alt:"暂无图片"}})])})):a("img",{style:e.styleObject,attrs:{src:i.row[e.value],alt:"暂无图片"}})]:e.isTag?t._l(i.row[e.value],function(e,i){return a("span",{key:i,staticClass:"el-tag el-tag--info el-tag--small",staticStyle:{margin:"4px"}},[a("span",{staticClass:"el-select__tags-text"},[t._v("\n            "+t._s(e)+"\n          ")])])}):[t._v("\n        "+t._s(i.row[e.value])+"\n      ")]]}}])})}),t._v(" "),0!==t.list.length&&0!==t.actions.length?a("el-table-column",{attrs:{label:"操作",align:"center",width:"160","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.actions,function(i,n){return a("el-button",{key:i.value,style:{margin:t.actions.length>2?"5px":"0 0 0 10px"},attrs:{type:i.type,size:"mini"},on:{click:function(t){i.click(e.row,e.$index)}}},[t._v(t._s(i.value)+"\n      ")])})}}])}):t._e()],2)},[],!1,null,"5215e21c",null);l.options.__file="index.vue";e.a=l.exports},"9TPh":function(t,e,a){"use strict";var i=a("QbLZ"),n=a.n(i),l=a("vDqi"),s=a.n(l),r=(a("EVdn"),a("XJYT")),o=(a("X4fA"),a("L2JU")),c={props:{number:{type:Number,required:!0},imgNum:{type:Number,default:1},imgWidth:{type:Number,default:160},imgHeight:{type:Number,default:100},imgs:{type:[Array,String]},imageSrc:{type:String}},model:{prop:"imgs",event:"cc"},data:function(){return{type:1}},computed:{imageAry:function(){return void 0===this.imageSrc?"Array"==={}.toString.call(this.imgs).slice(8,-1)?(this.type=2,this.imgs):(this.type=1,[this.imgs]):(this.type=3,this.imgs)}},methods:n()({},Object(o.b)(["token"]),{fileChange:function(t,e){var a=this,i=t.target.files[0];if(console.log(i.type),i&&-1!==["image/jpeg","image/png","image/gif","video/mp3","video/mp4"].indexOf(i.type)){var n={target:"#upload"+this.number+e,background:"white",customClass:"imgMask"},l=r.Loading.service(n),o=new FormData;o.append("file",i);var c={headers:{token:this.token()}};s.a.post("https://luna.ajimiyou.com/luna/image/upload",o,c).then(function(t){console.log("响应结果",t.data);var i=t.data.data,n=i;2===a.type&&(a.imgs[e]=i,n=a.imgs.filter(function(t){return null!=t})),a.$emit("cc",n),l.close()}).catch(function(t){console.log("错误结果",t),a.$message({message:"出错了！*>﹏<* ~ 请重新上传",type:"error",duration:1800}),l.close()})}else this.$message({message:"仅支持jpeg,png,gif,mp3,mp4格式的文件",type:"error",duration:1800})},handleDelete:function(t){console.log("删除的图片",t);var e="";2===this.type&&(this.imgs[t]=null,e=this.imgs.filter(function(t){return null!=t})),this.$emit("cc",e)}})},u=(a("iZ8v"),a("KHd+")),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"imageLoad clearfix"},t._l(t.imgNum,function(e,i){return a("div",{key:i,staticClass:"load-inner",style:{width:t.imgWidth+"px",height:t.imgHeight+"px"}},[1===t.type||2===t.type?[null==t.imageAry[i]||""==t.imageAry[i]?[a("div",{style:{height:t.imgHeight+"px"},attrs:{id:"upload"+t.number+i}},[a("i",{staticClass:"load-icon el-icon-plus"}),t._v(" "),a("input",{staticClass:"load-file",attrs:{type:"file",name:"image"},on:{change:function(e){t.fileChange(e,i)}}})])]:[a("div",{staticClass:"load-img"},[a("label",{staticClass:"delete-label"},[a("i",{staticClass:"delete el-icon-close",on:{click:function(e){t.handleDelete(i)}}})]),t._v(" "),a("img",{attrs:{src:t.imageAry[i],alt:"暂无图片"}})])]]:t._e()],2)}))},[],!1,null,"01b5e87c",null);p.options.__file="index.vue";e.a=p.exports},RQLe:function(t,e,a){"use strict";a.d(e,"c",function(){return n}),a.d(e,"a",function(){return l}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return r}),a.d(e,"d",function(){return o});var i=a("t3Un");function n(t){return Object(i.a)({url:"/game/list",method:"post",data:t})}function l(t){return Object(i.a)({url:"/game/add",method:"post",data:t})}function s(t){return Object(i.a)({url:"/game/update",method:"post",data:t})}function r(t){return Object(i.a)({url:"/game/delete",method:"post",data:{id:t}})}function o(t){return Object(i.a)({url:"/game/move",method:"post",params:t})}},SG8p:function(t,e,a){"use strict";var i=a("TqJv");a.n(i).a},TqJv:function(t,e,a){},Uspr:function(t,e,a){},"cj/Y":function(t,e,a){"use strict";var i=a("Uspr");a.n(i).a},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},iZ8v:function(t,e,a){"use strict";var i=a("2QOn");a.n(i).a},jo6Y:function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t,e){var a={};for(var i in t)e.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}},mlPe:function(t,e,a){"use strict";a.r(e);var i=a("FyfS"),n=a.n(i),l=a("jo6Y"),s=a.n(l),r=a("P2sY"),o=a.n(r),c=a("gDS+"),u=a.n(c),p=a("9Pcu"),m=a("9TPh"),d=a("RQLe"),g={components:{Table:p.a,Dropzone:m.a},data:function(){return{list:[],listLoading:!0,loading:!1,total:0,totalPage:0,thead:[],listQuery:{index:1,pageSize:10,keyword:""},actions:[{type:"primary",value:"上移",click:this.changeUp},{type:"primary",value:"下移",click:this.changeDown},{type:"primary",value:"编辑",click:this.handleUpdate}],temp:{},dialogStatus:"",dialogFormVisible:!1,rules:{name:[{type:"string",required:!0,message:"主题是必须的",trigger:"blur"}],summary:[{type:"string",required:!0,message:"简介是必须的",trigger:"blur"}],des:[{type:"string",required:!0,message:"详细介绍是必须的",trigger:"blur"}],rate:[{type:"number",required:!0,message:"评分是必须的,类型需要是数字",trigger:"blur"}]}}},created:function(){this.fetchData()},methods:{match:function(t){switch(t){case 1:return"iOS";case 0:return"Android";case 2:return"miniApp";case 3:return"H5"}},dealData:function(t){var e=this;return(t=t||[]).forEach(function(t){var a=t.id,i=t.images,n=t.platforms;if(t.id=parseInt(a),i){var l=[];i.forEach(function(t){l.push(t.image)}),t.imgs=l}if(4!==n.length){var s=[0,1,2,3];n.forEach(function(t){var e=s.indexOf(t.type);s.splice(e,1)}),s.forEach(function(t){n.push({type:t,state:-1,playType:0,platformState:"隐藏",platformPlayType:"H5"})})}n.forEach(function(t){t.platformType=e.match(t.type)}),t.platforms=n;var r=[];t.platforms.forEach(function(t){var e=t.platformType,a=t.platformState,i=t.platformPlayType;r.push(e+"："+a+"，"+i)}),t.zy_platforms=r,t.rate=t.rate?t.rate:9.8}),t},fetchData:function(){var t=this;this.listLoading=!0,Object(d.c)(this.listQuery).then(function(e){var a=e.data,i=a.items,n=a.total,l=a.totalPage;console.log(i);var s=t.dealData(i);t.getHead(s),t.list=s,t.totalPage=l,t.total=parseInt(n),t.listLoading=!1})},getHead:function(t){var e=[];for(var a in t[0]){var i={sort:!1};switch(a){case"id":i.label="id",i.sort=!0,i.value=a,i.width="60",e[0]=i;break;case"name":i.label="标题",i.value=a,e[1]=i,i.width="106";break;case"coverImage":i.label="封面图",i.value=a,i.isImage=!0,i.width="100",i.styleObject={width:"80px",height:"50px"},e[2]=i;break;case"summary":i.label="简介",i.value=a,i.width="190",e[3]=i;break;case"imgs":i.label="详情轮播图",i.value=a,i.isImage=!0,e[4]=i,i.styleObject={width:"130px",height:"90px"};break;case"zy_platforms":i.label="平台状态",i.value=a,i.isTag=!0,i.width="200",e[5]=i;break;case"icon":i.label="icon",i.value=a,e[6]=i,i.isImage=!0,i.width="68",i.styleObject={width:"50px",height:"50px"};break;case"rate":i.label="评分",i.value=a,i.width="50",e[7]=i;break;default:continue}}this.thead=e},handleCurrentChange:function(t){this.listQuery.index=t,this.fetchData()},handleFilter:function(){this.listQuery.index=1,this.fetchData()},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="添加",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleUpdate:function(t){var e=this;console.log(t);var a=JSON.parse(u()(t)),i=a.id,n=a.name,l=a.summary,s=a.des,r=a.icon,c=a.rate,p=a.imgs,m=a.coverImage,d=a.platforms,g=a.onlineUrl;this.temp=o()({},{id:i,name:n,summary:l,des:s,icon:r,rate:c,imgs:p,coverImage:m,platforms:d,onlineUrl:g}),this.dialogStatus="编辑",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.dataForm.clearValidate()})},handleDelete:function(t){var e=this;console.log("要删除的id",t.id),Object(d.b)(t.id).then(function(){var a=e.list.indexOf(t);e.list.splice(a,1),e.total=e.total-1,e.$notify({title:"成功",message:"用户删除成功",type:"success",duration:1500})})},resetTemp:function(){this.temp={name:"",summary:"",des:"",rate:9.8,imgs:[],icon:"",coverImage:"",onlineUrl:"",platforms:[{type:0,platformType:"Android",state:-1,playType:0},{type:1,platformType:"iOS",state:-1,playType:0},{type:2,platformType:"miniApp",state:-1,playType:0},{type:3,platformType:"H5",state:-1,playType:0}]}},checkout:function(){var t=this.temp,e=t.coverImage,a=t.icon,i=t.imgs;return""!==e&&""!==a&&0!==i.length||(this.$message({message:"请上传必要的图片",type:"error",duration:1800}),!1)},dealImgs:function(){var t=this.temp,e=t.imgs,a=s()(t,["imgs"]),i=[];return e.forEach(function(t,e){var a={};a.image=t,a.sequence=e+1,i.push(a)}),o()({},{images:i},a)},changeUp:function(t,e){var a=this;if(!this.loading)if(console.log(t,e),1!==this.listQuery.index||0!==e){this.loading=!0;var i=JSON.parse(u()(this.list));Object(d.d)({type:0,gameId:t.id}).then(function(t){if(a.$notify({title:"成功",message:"上移成功",type:"success",duration:800,onClose:function(){a.loading=!1}}),0!==e){var n;return n=i[e],i[e]=i[e-1],i[e-1]=n,void(a.list=i)}var l=a.dealData([t.data])[0];i.splice(e,1,l),a.list=i}).catch(function(t){a.$notify({title:"失败",message:"上移失败",type:"err",duration:800,onClose:function(){a.loading=!1}})})}else this.$message({title:"失败",message:"第一个无法上移",type:"error",duration:1e3})},changeDown:function(t,e){var a=this;if(!this.loading){console.log(t,e);var i=this.listQuery,n=i.index,l=i.pageSize,s=this.total;if(n!==this.totalPage||e!==s%l-1){this.loading=!0;var r=JSON.parse(u()(this.list));Object(d.d)({type:1,gameId:t.id}).then(function(t){if(a.$notify({title:"成功",message:"下移成功",type:"success",duration:800,onClose:function(){a.loading=!1}}),9!==e){var i;return i=r[e],r[e]=r[e+1],r[e+1]=i,void(a.list=r)}var n=a.dealData([t.data])[0];r.splice(e,1,n),a.list=r}).catch(function(t){a.$notify({title:"失败",message:"下移失败",type:"err",duration:800,onClose:function(){a.loading=!1}})})}else this.$message({title:"失败",message:"最后一个无法下移",type:"error",duration:1e3})}},createData:function(){var t=this;this.loading||this.$refs.dataForm.validate(function(e){if(e&&t.checkout()){t.loading=!0;var a=t.dealImgs();console.log("createData",a),Object(d.a)(a).then(function(e){var a=t.dealData([e.data])[0];t.list.unshift(a),1===t.list.length&&t.getHead(t.list),t.total=t.total+1,t.dialogFormVisible=!1,t.$notify({title:"成功",message:"创建成功",type:"success",duration:1800,onClose:function(){t.loading=!1}})}).catch(function(){t.$notify({title:"失败",message:"创建失败，请重试",type:"error",duration:1500,onClose:function(){t.loading=!1}})})}})},updateData:function(){var t=this;this.loading||this.$refs.dataForm.validate(function(e){if(e&&t.checkout()){t.loading=!0;var a=t.dealImgs();console.log("updateData",a),Object(d.e)(a).then(function(e){var a=t.dealData([e.data])[0],i=!0,l=!1,s=void 0;try{for(var r,o=n()(t.list);!(i=(r=o.next()).done);i=!0){var c=r.value;if(c.id===a.id){var u=t.list.indexOf(c);t.list.splice(u,1,a);break}}}catch(t){l=!0,s=t}finally{try{!i&&o.return&&o.return()}finally{if(l)throw s}}t.dialogFormVisible=!1,t.$notify({title:"成功",message:"更新成功",type:"success",duration:1800,onClose:function(){t.loading=!1}})}).catch(function(){t.$notify({title:"失败",message:"更新失败,请重试",type:"error",duration:1500,onClose:function(){t.loading=!1}})})}})}}},f=(a("cj/Y"),a("KHd+")),h=Object(f.a)(g,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inner"},[a("span",{staticClass:"title"},[t._v("哆哒数据配置")]),t._v(" "),a("div",{staticClass:"app-container"},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"400px","margin-right":"20px"},attrs:{placeholder:"请输入要搜索的内容"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleFilter(e):null}},model:{value:t.listQuery.keyword,callback:function(e){t.$set(t.listQuery,"keyword",t._n(e))},expression:"listQuery.keyword"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"success",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("新增数据")]),t._v(" "),a("Table",{attrs:{thead:t.thead,list:t.list||[],listLoading:t.listLoading,actions:t.actions}}),t._v(" "),a("div",{staticClass:"pagination-container",staticStyle:{"margin-top":"20px"},attrs:{align:"right"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, jumper",total:t.total,"current-page":t.listQuery.index,"page-size":t.listQuery.pageSize},on:{"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.dialogStatus,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"dialog"},[a("el-form",{ref:"dataForm",staticStyle:{"min-width":"450px","max-width":"1000px"},attrs:{rules:t.rules,model:t.temp,"label-position":"right","label-width":"90px"}},[a("el-form-item",{staticClass:"name",attrs:{label:"标题",prop:"name"}},[a("el-input",{model:{value:t.temp.name,callback:function(e){t.$set(t.temp,"name","string"==typeof e?e.trim():e)},expression:"temp.name"}})],1),t._v(" "),a("el-form-item",{staticClass:"rate",attrs:{label:"评分",prop:"rate"}},[a("el-input",{attrs:{disabled:""},model:{value:t.temp.rate,callback:function(e){t.$set(t.temp,"rate",t._n("string"==typeof e?e.trim():e))},expression:"temp.rate"}})],1),t._v(" "),a("el-form-item",{staticClass:"icon",attrs:{label:"icon","label-width":"50px"}},[a("Dropzone",{attrs:{number:1,imgWidth:70,imgHeight:70},model:{value:t.temp.icon,callback:function(e){t.$set(t.temp,"icon",e)},expression:"temp.icon"}})],1),t._v(" "),a("el-form-item",{staticClass:"summary",attrs:{label:"简介",prop:"summary"}},[a("el-input",{staticStyle:{"max-width":"700px"},model:{value:t.temp.summary,callback:function(e){t.$set(t.temp,"summary","string"==typeof e?e.trim():e)},expression:"temp.summary"}})],1),t._v(" "),a("el-form-item",{staticClass:"onlineUrl",attrs:{label:"H5地址"}},[a("el-input",{staticStyle:{"max-width":"700px"},model:{value:t.temp.onlineUrl,callback:function(e){t.$set(t.temp,"onlineUrl","string"==typeof e?e.trim():e)},expression:"temp.onlineUrl"}})],1),t._v(" "),a("el-form-item",{staticStyle:{width:"932px"},attrs:{label:"详细介绍",prop:"des"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:4},type:"textarea",placeholder:"请输入详细介绍"},model:{value:t.temp.des,callback:function(e){t.$set(t.temp,"des","string"==typeof e?e.trim():e)},expression:"temp.des"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"轮播图"}},[a("Dropzone",{attrs:{number:2,imgNum:5,imgWidth:162,imgHeight:120},model:{value:t.temp.imgs,callback:function(e){t.$set(t.temp,"imgs",e)},expression:"temp.imgs"}})],1),t._v(" "),a("div",{staticClass:"platforms"},[a("span",{staticClass:"stateTag appState"},[t._v("游戏状态")]),t._v(" "),a("span",{staticClass:"stateTag appState"},[t._v("游戏类型")]),t._v(" "),t._l(t.temp.platforms,function(e,i){return a("el-form-item",{key:i,attrs:{label:e.platformType}},[a("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择平台状态"},model:{value:e.state,callback:function(a){t.$set(e,"state",a)},expression:"platform.state"}},[a("el-option",{attrs:{label:"正常",value:0}}),t._v(" "),a("el-option",{attrs:{label:"更新维护",value:1}}),t._v(" "),a("el-option",{attrs:{label:"敬请期待",value:2}}),t._v(" "),a("el-option",{attrs:{label:"隐藏",value:-1}})],1),t._v(" "),a("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择游戏状态"},model:{value:e.playType,callback:function(a){t.$set(e,"playType",a)},expression:"platform.playType"}},[a("el-option",{attrs:{label:"H5",value:0}}),t._v(" "),a("el-option",{attrs:{label:"MiniApp",value:1}}),t._v(" "),a("el-option",{attrs:{label:"runtime",value:2}})],1)],1)})],2),t._v(" "),a("el-form-item",{staticClass:"coverImage",attrs:{label:"封面图"}},[a("Dropzone",{attrs:{number:0,imgWidth:180,imgHeight:120},model:{value:t.temp.coverImage,callback:function(e){t.$set(t.temp,"coverImage",e)},expression:"temp.coverImage"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer clearfix",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!t.dialogFormVisible}}},[t._v("取消")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"success"},on:{click:function(e){"编辑"===t.dialogStatus?t.updateData():t.createData()}}},[t._v(t._s("编辑"==t.dialogStatus?"保存":"添加"))])],1)],1)])],1)])},[],!1,null,null,null);h.options.__file="configuration.vue";e.default=h.exports},"oh+g":function(t,e,a){var i=a("WEpk"),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}}}]);